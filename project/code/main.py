'''

Main code of code

'''

# import settings vars only here, inject them on other instances

import settings
import time
import datetime

from processor import Processor
from doc import DocManager

def main():

    # declare all instances to be injected
    processor = Processor(
        chars_to_remove = settings.NPL_CHARS_TO_REMOVE
    )

    doc_manager = DocManager(
        docs_limit = settings.DOCS_LIMIT,
        path_data_raw = settings.PATH_DATA_RAW,
        path_data_counts = settings.PATH_DATA_COUNTS,
        processor = processor,
        max_features = settings.NPL_MAX_FEATURES,
        ngram = 1,
        max_workers = 3
    )

    # create count docs
    # for i in range(1, settings.NPL_TOKEN_MAX_LEN+1):
    doc_manager.set_ngram(1)
    doc_manager.create_count_from_asm()

    # create accumulated counts
    # for i in range(1, settings.NPL_TOKEN_MAX_LEN+1):
    # doc_manager.set_ngram(1)
    # doc_manager.create_vocab_from_files()




if __name__ == '__main__':
    start = datetime.datetime.now()
    main()
    stop = datetime.datetime.now()
    print(str(stop-start).split('.')[0])